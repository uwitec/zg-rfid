<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="Base">
    <statement id="createTable" parameterClass="java.lang.String" remapResults="true">
        create table $tableName:VARCHAR$
        (
        id number(40) not null
        )
        PCTUSED 0
        PCTFREE 10
        INITRANS 5
        MAXTRANS 100
        STORAGE (
        INITIAL 16K
        NEXT 8M
        BUFFER_POOL DEFAULT
        )
    </statement>
    <statement id="addTablePk" parameterClass="java.util.Map" remapResults="true">
        alter table $tableName$ add constraint pk_$tableName$_id primary key ($colName$)
    </statement>
    <statement id="addTableColumn" parameterClass="java.util.Map" remapResults="true">
        alter table $tableName$ add $colName$ $colType$ $nullAble$
    </statement>
    <statement id="renameTableColumn" parameterClass="java.util.Map" remapResults="true">
        alter table $tableName$ rename column $colName$ to $newColName$
    </statement>
    <statement id="modifyTableColumn" parameterClass="java.util.Map" remapResults="true">
        alter table $tableName$ modify $colName$ $colType$ $nullAble$
    </statement>
    
    <statement id="executeSql" resultClass="java.util.HashMap" parameterClass="java.lang.String" remapResults="true">
    	$executeSql:VARCHAR$
    </statement>
    <statement id="calculate" resultClass="java.lang.Integer" parameterClass="java.lang.String" remapResults="true">
    	$executeSql:VARCHAR$
    </statement>
    
    <select id="getSysDate" resultClass="java.util.Date">
        SELECT sysdate FROM DUAL
    </select>
    <select id="getSeq" parameterClass="java.lang.String" resultClass="java.lang.Integer">
        SELECT $seqName$.Nextval FROM DUAL
    </select>
	<select id="selectGUID" resultClass="java.lang.String">
        SELECT SYS_GUID() FROM DUAL
    </select>

    <select id="queryDyn" parameterClass="java.lang.String" resultClass="java.util.HashMap" remapResults="true">
       	$sqlStr$
    </select>

	<select id="queryDynPage" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">
       	select * from ( 
       	select my_table.*,rownum rn from 
       	( $sqlStr$ ) my_table where rownum  <![CDATA[<=]]> #endPos#)   	 where  rn  <![CDATA[>=]]> #startPos# 
    </select>
    

    <insert id="insertDynamicTable" parameterClass="java.util.Map">
        insert /*+append*/ into $tableName$
        <iterate prepend="(" property="columnList" conjunction=",">
            $columnList[].column$
        </iterate>
        ) values
        <iterate prepend="(" property="columnList" conjunction=",">
            #columnList[].value#
        </iterate>
        )
    </insert>

    <update id="updateDynamicTable" parameterClass="java.util.Map">
        update $tableName$
        <dynamic prepend="set">
            <iterate property="columnList" conjunction=",">
                $columnList[].column$ = #columnList[].value#
            </iterate>
        </dynamic>
        where $pk.key$ = #pk.value#
    </update>

</sqlMap>